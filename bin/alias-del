#!/bin/sh

set -eu

cd "$(dirname "$0")/.."

tmp="$(mktemp)"
grep -R "alias ${1}=" dirs lib sudo | while IFS=: read -r file line; do
  sed "/${line}/d" "${file}" > "${tmp}"
  cp "${tmp}" "${file}"
done

test -n "$(git status --porcelain)" || exit 0
git add .
git commit -a -m "${0}: ${1}"
git push
